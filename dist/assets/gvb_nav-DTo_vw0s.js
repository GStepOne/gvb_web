import{_ as C,a as V}from"./gvb_user_info_menu.vue_vue_type_style_index_0_lang-BdTKI-qV.js";import{d as $,r as g,k as y,a as b,o as c,c as l,b as o,w as i,g as e,y as L,F as p,e as T,t as f,q as B,h as m,O as E,M as I,P as M,u as N,K,j as u,x as U}from"./index-D8gmBzh4.js";import{g as A}from"./article_api-Bg5Wr0vn.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"head"},H={class:"body"},R=["onClick"],j={class:"title"},q=["innerHTML"],z={class:"footer"},D={class:"gvb_search"},O=$({__name:"gvb_search",setup(k){const n=g(!1),v=g(),r=y({});function _(){n.value=!0,E(()=>{v.value.focus()})}const t=y({list:[],count:0});async function d(){let s=await A(r);if(s.code){I.error(s.msg);return}t.list=s.data.list,t.count=s.data.count}function w(s){window.open(`/article/${s.slug}`,"_blank")}return(s,h)=>{const S=b("a-input-search"),x=b("a-modal");return c(),l(p,null,[o(x,{width:"40%",title:"全文搜索",footer:!1,visible:n.value,"onUpdate:visible":h[1]||(h[1]=a=>n.value=a),"body-class":"gvb_search_body"},{default:i(()=>[e("div",G,[o(S,{modelValue:r.key,"onUpdate:modelValue":h[0]||(h[0]=a=>r.key=a),ref_key:"searchRef",ref:v,placeholder:"全文搜索","search-button":"",onKeydown:L(d,["enter"]),onSearch:d},null,8,["modelValue"])]),t.list.length?(c(),l(p,{key:0},[e("div",H,[(c(!0),l(p,null,T(t.list,a=>(c(),l("div",{class:"item",onClick:ne=>w(a)},[e("div",j,f(a.title),1),e("div",{class:"content",innerHTML:a.body},null,8,q)],8,R))),256))]),e("div",z," 共搜索到结果 "+f(t.count)+" 条 ",1)],64)):B("",!0)]),_:1},8,["visible"]),e("div",D,[o(m(M),{onClick:_})])],64)}}}),P={class:"gvb_nav_container"},J={class:"left"},Q={class:"logo"},W={class:"slogan"},X={class:"en_slogan"},Y={class:"nav"},Z={class:"right"},ee={key:0,class:"login"},se={key:1,class:"user_info"},oe={class:"theme"},te=$({__name:"gvb_nav",props:{noScroll:{type:Boolean}},setup(k){const n=N(),v=k,{noScroll:r=!1}=v,_=g(!0);r||(_.value=!1,window.addEventListener("scroll",t),t());function t(){let d=document.documentElement.scrollTop;_.value=d>=200}return K(()=>{window.removeEventListener("scroll",t)}),(d,w)=>{const s=b("router-link");return c(),l("div",{class:U({gvb_nav:!0,isShow:_.value})},[e("div",P,[e("div",J,[e("div",Q,[e("div",W,f(m(n).siteInfo.slogan),1),e("div",X,f(m(n).siteInfo.slogan_en),1)]),e("div",Y,[o(s,{to:{name:"index"}},{default:i(()=>[u("首页")]),_:1}),o(s,{to:{name:"news"}},{default:i(()=>[u("新闻")]),_:1}),o(s,{to:{name:"search"}},{default:i(()=>[u("搜索")]),_:1}),o(s,{to:{name:"chat"}},{default:i(()=>[u("聊天室")]),_:1})]),o(O)]),e("div",Z,[m(n).isLogin?(c(),l("div",se,[o(C)])):(c(),l("div",ee,[o(s,{to:{name:"login"}},{default:i(()=>[u("登录")]),_:1})])),e("div",oe,[o(V)])])])],2)}}}),re=F(te,[["__scopeId","data-v-ef340d7d"]]);export{re as G};

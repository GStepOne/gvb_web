import{_ as A}from"./gvb_table.vue_vue_type_style_index_0_lang-C7TABh2O.js";import{a as T,b as q,d as N,p as I}from"./promotion_api-QfYI16Fd.js";import{G as $}from"./gvb_upload_image-laikCuTi.js";import{d as O,k as B,r as v,a as r,o as c,c as U,b as o,w as a,M as w,j as h,t as V,g as D,h as x,f as y}from"./index-BUgfj_ir.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as F}from"./date-BwahDaeY.js";import"./index-LyQDbr6L.js";/* empty css                                                                         */const G=O({__name:"promotion_create",props:{visible:{type:Boolean},record:{}},emits:["update:visible","ok"],setup(k,{emit:g}){const d=g,e=B({href:"",images:"",is_show:!1,title:""}),s=v(void 0),f=v(),u=k;async function b(){let m=await f.value.validate();if(m)return console.log("参数错误了",m),!1;let t;return s.value?(console.log("请求的是更新接口",s.value),t=await T(s.value,e)):(console.log("请求的是新增接口",s.value),t=await q(e)),t.code?(w.error(t.msg),!1):(w.success(t.msg),d("update:visible",!1),d("ok"),Object.assign(e,N),!0)}function p(){Object.assign(e,u.record),s.value=u.record.id}return(m,t)=>{const _=r("a-input"),n=r("a-form-item"),l=r("a-switch"),j=r("a-form"),C=r("a-modal");return c(),U("div",null,[o(C,{title:s.value?"编辑广告":"创建广告",visible:u.visible,onBeforeOpen:p,onCancel:t[4]||(t[4]=i=>d("update:visible",!1)),"on-before-ok":b},{default:a(()=>[o(j,{ref_key:"formRef",ref:f,model:e},{default:a(()=>[o(n,{field:"title",label:"广告名称",rules:[{required:!0,message:"广告名称"}],"validate-trigger":["blur"]},{default:a(()=>[o(_,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=i=>e.title=i),placeholder:"广告名称"},null,8,["modelValue"])]),_:1}),o(n,{field:"href",label:"跳转链接",rules:[{required:!0,message:"请输入跳转链接"}],"validate-trigger":["blur"]},{default:a(()=>[o(_,{modelValue:e.href,"onUpdate:modelValue":t[1]||(t[1]=i=>e.href=i),placeholder:"广告跳转链接，请以http、https 开头"},null,8,["modelValue"])]),_:1}),o(n,{field:"images",label:"图片链接",rules:[{required:!0,message:"请输入图片链接"}],"validate-trigger":["blur"]},{default:a(()=>[o($,{modelValue:e.images,"onUpdate:modelValue":t[2]||(t[2]=i=>e.images=i)},null,8,["modelValue"])]),_:1}),o(n,{field:"is_show",label:"是否显示",rules:[{message:"请选择是否显示"}],"validate-trigger":["blur"]},{default:a(()=>[o(l,{modelValue:e.is_show,"onUpdate:modelValue":t[3]||(t[3]=i=>e.is_show=i),placeholder:"是否显示"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])])}}}),L=E(G,[["__scopeId","data-v-9c2112c1"]]),M={class:"menu_promotion_view"},W=O({__name:"promotion_list",setup(k){const g=[{title:"标题",dataIndex:"title"},{title:"图片",slotName:"images"},{title:"链接",slotName:"href"},{title:"是否显示",slotName:"is_show"},{title:"更新时间",slotName:"updated_at"},{title:"操作",slotName:"action"}],d=v(),e=v(!1),s=B({id:void 0,href:"",images:"",is_show:!1,title:""});function f(p){Object.assign(s,p),e.value=!0}function u(){d.value.getList()}function b(){Object.assign(s,N),s.id=void 0,e.value=!0}return(p,m)=>{const t=r("a-image"),_=r("a-link"),n=r("a-tag");return c(),U("div",M,[o(L,{visible:e.value,"onUpdate:visible":m[0]||(m[0]=l=>e.value=l),onOk:u,record:s},null,8,["visible","record"]),o(A,{url:x(I),columns:g,"default-delete":"","add-label":"创建广告",ref_key:"gvbTable",ref:d,"delete-url":"/api/advert","search-placeholder":"搜索广告名称",onAdd:b,onEdit:f,"no-confirm":""},{images:a(({record:l})=>[o(t,{height:"60px",style:{"border-radius":"5px"},src:l.images},null,8,["src"])]),href:a(({record:l})=>[o(_,{href:l.href,target:"_blank"},{default:a(()=>[h(V(l.href),1)]),_:2},1032,["href"])]),updated_at:a(({record:l})=>[D("span",null,V(x(F)(l.updated_at)),1)]),is_show:a(({record:l})=>[l.is_show?(c(),y(n,{key:0,color:"arcoblue"},{default:a(()=>[h("显示")]),_:1})):(c(),y(n,{key:1},{default:a(()=>[h("不显示")]),_:1}))]),_:1},8,["url"])])}}});export{W as default};

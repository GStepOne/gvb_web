import{d as x,u as y,r as d,a as l,o as w,c as k,b as a,w as s,h as c,g as N,j as I,J as B,M as L,af as T}from"./index-BUgfj_ir.js";import{_ as C}from"./gvb_table.vue_vue_type_style_index_0_lang-C7TABh2O.js";import{c as O}from"./carousel_api-DNmQxz07.js";import{I as S}from"./index-mwH3FZMb.js";import"./date-BwahDaeY.js";import"./index-LyQDbr6L.js";const U={class:"image_list_view"},V=["href","download"],q=x({__name:"carousel_list",setup(A){const u=y(),r=d([]),m=[{title:"id",dataIndex:"id"},{title:"名字",dataIndex:"name"},{title:"上传类型",dataIndex:"image_type",render:o=>{const e=o.record;let n="red";return e.image_type==="本地"&&(n="green"),B(T,{color:n},{default:()=>e.image_type})}},{title:"预览",slotName:"path"},{title:"上传时间",slotName:"created_at"},{title:"操作",slotName:"action"}],i=d(!1),p=d();function _(){p.value.getList()}function f(o){console.log(o);const e=o.response;if(e.code){L.error(e.msg);return}}function g(){r.value=[]}return(o,e)=>{const n=l("a-upload"),v=l("a-modal"),b=l("a-image"),h=l("a-button");return w(),k("div",U,[a(v,{title:"图片上传",onBeforeOpen:g,visible:i.value,"onUpdate:visible":e[1]||(e[1]=t=>i.value=t),onOk:_},{default:s(()=>[a(n,{headers:{token:c(u).userInfo.token},"list-type":"picture-card",action:"/api/carousel",name:"image",class:"gvb_image_upload","file-list":r.value,"onUpdate:fileList":e[0]||(e[0]=t=>r.value=t),"image-preview":"",multiple:"",onSuccess:f},null,8,["headers","file-list"])]),_:1},8,["visible"]),a(C,{url:c(O),"delete-url":"/api/carousels",columns:m,"default-delete":"","add-label":"图片上传",ref_key:"gvbTable",ref:p,"search-placeholder":"搜索图片名称",onAdd:e[2]||(e[2]=t=>i.value=!0),"no-edit":"","no-confirm":""},{path:s(({record:t})=>[a(b,{src:t.path,style:{"border-radius":"5px"},height:"50px"},null,8,["src"])]),action_left:s(({record:t})=>[N("a",{style:{"margin-right":"10px"},href:t.path,download:t.name},[a(h,{type:"primary"},{icon:s(()=>[a(c(S))]),default:s(()=>[I("下载图片 ")]),_:1})],8,V)]),_:1},8,["url"])])}}});export{q as default};

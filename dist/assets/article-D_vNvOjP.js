import{G as A}from"./gvb_banner-CuY6VLhm.js";import{G as R}from"./gvb_nav-CpDQXTaQ.js";import{_ as M,d as h,B,A as C,C as N,o as p,c as g,x as v,D as E,g as r,r as _,b as u,w as I,h as c,G as q,H as W,J as O,u as H,k as Z,K as J,n as K,l as Q,a as X,t as k,F as Y,e as ee,f as j,q as te,v as oe,s as se,M as f,j as ne,L as ie,p as le,i as re}from"./index-BUgfj_ir.js";import{_ as ae}from"./gvb_footer.vue_vue_type_style_index_0_lang-C-aRzgjq.js";import{_ as ce}from"./gvb_card.vue_vue_type_style_index_0_lang-BkBp656V.js";import{G as ue}from"./gvb_user_info_preview-CwfmHyuK.js";import{_ as de}from"./gvb_comment.vue_vue_type_style_index_0_lang-D04bmxRT.js";import{d as me,e as _e,f as pe}from"./article_api-ytvE67Cj.js";import{d as fe,r as ve}from"./date-BwahDaeY.js";import{M as ge,a as he}from"./MdCatalog-DNRuLnWC.js";import{c as ke}from"./global-DDeb5C-W.js";import{_ as be}from"./gvb_login_form.vue_vue_type_style_index_0_lang-DM1JnBeN.js";import{I as Ce}from"./index-C_nQJbSE.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./carousel_api-DNmQxz07.js";import"./gvb_user_info_menu.vue_vue_type_style_index_0_lang-CIbDZJly.js";import"./gvb_message_record--75uwyFo.js";import"./gvb_message_record.vue_vue_type_style_index_0_lang-ChVal51A.js";import"./message_api-iUw8swaY.js";import"./index-yndfbqt8.js";import"./index-DLNtBgUN.js";import"./index-D8ajxOCt.js";const $e=h({name:"IconDoubleUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const s=B("icon"),i=C(()=>[s,`${s}-double-up`,{[`${s}-spin`]:e.spin}]),a=C(()=>{const n={};return e.size&&(n.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:i,innerStyle:a,onClick:n=>{o("click",n)}}}}),ye=["stroke-width","stroke-linecap","stroke-linejoin"],Se=r("path",{d:"M38.1 36.858 23.957 22.716 9.816 36.858M38.1 25.544 23.957 11.402 9.816 25.544"},null,-1),Le=[Se];function Ie(e,o,s,i,a,d){return p(),g("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:v(e.cls),style:E(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...n)=>e.onClick&&e.onClick(...n))},Le,14,ye)}var S=M($e,[["render",Ie]]);const xe=Object.assign(S,{install:(e,o)=>{var s;const i=(s=o==null?void 0:o.iconPrefix)!=null?s:"";e.component(i+S.name,S)}}),ze=h({name:"IconThumbUpFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:o}){const s=B("icon"),i=C(()=>[s,`${s}-thumb-up-fill`,{[`${s}-spin`]:e.spin}]),a=C(()=>{const n={};return e.size&&(n.fontSize=N(e.size)?`${e.size}px`:e.size),e.rotate&&(n.transform=`rotate(${e.rotate}deg)`),n});return{cls:i,innerStyle:a,onClick:n=>{o("click",n)}}}}),Te=["stroke-width","stroke-linecap","stroke-linejoin"],je=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 43V17h4v26H5Z",fill:"currentColor",stroke:"none"},null,-1),Fe=r("path",{d:"M27.1 4.463a2 2 0 0 0-2.83.364L15.036 17H12v26h23.576a2 2 0 0 0 1.89-1.346l5.697-19.346c.899-2.598-1.03-5.308-3.78-5.308h-10.57l2.422-5.448a4 4 0 0 0-1.184-4.77L27.1 4.462Z",fill:"currentColor",stroke:"none"},null,-1),Me=[je,Fe];function Be(e,o,s,i,a,d){return p(),g("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:v(e.cls),style:E(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:o[0]||(o[0]=(...n)=>e.onClick&&e.onClick(...n))},Me,14,Te)}var L=M(ze,[["render",Be]]);const Ne=Object.assign(L,{install:(e,o)=>{var s;const i=(s=o==null?void 0:o.iconPrefix)!=null?s:"";e.component(i+L.name,L)}}),Ee=h({__name:"gvb_login",props:{visible:{type:Boolean}},emits:["update:visible","close"],setup(e,{emit:o}){const s=e,i=o,a=_();function d(){i("update:visible",!1),i("close"),a.value.formReset()}return(n,t)=>(p(),g("div",null,[u(c(q),{width:"400px","modal-class":"gvb_login_modal",visible:s.visible,title:"用户登录",footer:!1,onCancel:d},{default:I(()=>[u(be,{ref_key:"gvbLoginForm",ref:a,onOk:d},null,512)]),_:1},8,["visible"])]))}}),b=_(void 0);function De(){if(b.value===void 0){const e=h({setup(){return{visible:b,onClose:()=>{b.value=!1}}},render(){return O(Ee,{visible:this.visible,onClose:this.onClose})}}),o=W(e),s=document.createElement("div");o.mount(s),document.body.appendChild(s)}b.value=!0}const Pe=e=>(le("data-v-35430937"),e=e(),re(),e),Ue={class:"article_view"},Ve={class:"container"},Ge={class:"article_container"},Ae={class:"head"},Re=["id"],qe={class:"date"},We={class:"tag"},Oe=Pe(()=>r("div",{class:"next_prev"},null,-1)),He={class:"gvb_article_action"},F="articleId007",Ze=h({__name:"article",setup(e){const o=H();oe();const s=document.documentElement,i=se(),a=_(i.params.id),d=_(760),n=_(!1),t=Z({abstract:"",banner_id:0,banner_url:"",category:"",content:"",collects_count:0,comment_count:0,created_at:"",digg_count:0,id:"",link:"",look_count:0,source:"",tags:[],title:"",updated_at:"",user_avatar:"",user_id:0,user_nick_name:""}),w=_(!1);async function x(){w.value=!1;let l=await me(a.value);if(l.code){f.error(l.msg);return}Object.assign(t,l.data),w.value=!0}x(),window.addEventListener("scroll",z);function z(){document.documentElement.scrollTop>=d.value?n.value=!0:n.value=!1}J(()=>{window.removeEventListener("scroll",z)});function D(){document.documentElement.scrollTo({top:640,behavior:"smooth"})}const T=_();function P(){let l=document.querySelector(".add_comment");if(!l)return;let m=l.offsetTop;document.documentElement.scrollTo({top:m-60,behavior:"smooth"}),setTimeout(()=>{T.value.focus()})}async function U(){let l=await _e(a.value);if(l.code){f.error(l.msg);return}f.success(l.msg),t.digg_count++,t.is_digg=!0,setTimeout(()=>{t.is_digg=!1},2e3)}async function V(){if(!o.isLogin){De();return}let l=await pe(a.value);if(l.code){f.error(l.msg);return}t.is_collect=!t.is_collect,t.is_collect?t.collects_count++:t.collects_count--,f.success(l.msg)}return K(()=>i.params,()=>{a.value=i.params.id,x()},{immediate:!0,deep:!0}),Q(()=>{let l=i.hash;l!==""&&setTimeout(()=>{let m=document.querySelector(l);if(m){let $=m.getBoundingClientRect().top;document.documentElement.scrollTo({top:$-60,behavior:"smooth"})}},150)}),(l,m)=>{const $=X("a-tag");return p(),g("div",Ue,[u(R),u(A,{data:{abstract:t.abstract,banners:t.banner_url,slogan:t.title}},null,8,["data"]),r("main",null,[r("div",Ve,[r("div",Ge,[r("div",Ae,[r("div",{class:"title",id:t.title},k(t.title),9,Re),r("div",qe," 发布时间："+k(c(fe)(t.created_at))+" "+k(c(ve)(t.created_at)),1),r("div",We,[(p(!0),g(Y,null,ee(t.tags,(y,G)=>(p(),j($,{color:c(ke)[G]},{default:I(()=>[ne(k(y),1)]),_:2},1032,["color"]))),256))])]),r("article",null,[u(c(ge),{"editor-id":F,modelValue:t.content,"onUpdate:modelValue":m[0]||(m[0]=y=>t.content=y),theme:c(o).themeString},null,8,["modelValue","theme"])]),Oe,u(de,{"article-id":a.value,ref_key:"gvbCommentRef",ref:T},null,8,["article-id"])]),r("aside",null,[u(ue,{data:{avatar:t.user_avatar,nickname:t.user_nick_name,sign:"",link:t.link,collects_count:t.collects_count,look_count:t.look_count,digg_count:t.digg_count,comment_count:t.comment_count}},null,8,["data"]),r("div",{class:v({article_actions:!0,isFixed:n.value})},[u(ce,{title:"文章目录",class:"gvb_article_dict"},{default:I(()=>[w.value?(p(),j(c(he),{key:0,"scroll-element":c(s),theme:c(o).themeString,"offset-top":80,"scroll-element-offset-top":80,"editor-id":F},null,8,["scroll-element","theme"])):te("",!0)]),_:1}),r("div",He,[u(c(Ne),{class:v({active:t.is_digg}),onClick:U},null,8,["class"]),u(c(ie),{class:v({active:t.is_collect}),onClick:V},null,8,["class"]),u(c(xe),{onClick:D}),u(c(Ce),{onClick:P})])],2)])])]),u(ae)])}}}),gt=we(Ze,[["__scopeId","data-v-35430937"]]);export{gt as default};

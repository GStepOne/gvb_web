import{_ as F,d as O,B as K,A as B,C as P,o as a,c as n,x as w,D as U,g as s,u as q,k as N,r as S,n as G,a as g,b as l,t as i,h as d,y as H,w as x,j as _,F as k,e as b,f as W,I as J,q as C,E as Z}from"./index-D8gmBzh4.js";import{G as Q}from"./gvb_nav-DTo_vw0s.js";import{c as R,b as X}from"./article_api-Bg5Wr0vn.js";import{a as Y}from"./tag_api-DSfuC_OI.js";import{d as tt}from"./date-B9d_EV3y.js";import{_ as et}from"./gvb_footer.vue_vue_type_style_index_0_lang-u_JrdO-y.js";import{I as ot}from"./index-BHMoaJRD.js";import{I as st}from"./index-aVw-_qhZ.js";import"./gvb_user_info_menu.vue_vue_type_style_index_0_lang-BdTKI-qV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const at=O({name:"IconStar",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:c}){const o=K("icon"),p=B(()=>[o,`${o}-star`,{[`${o}-spin`]:e.spin}]),v=B(()=>{const r={};return e.size&&(r.fontSize=P(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:p,innerStyle:v,onClick:r=>{c("click",r)}}}}),nt=["stroke-width","stroke-linecap","stroke-linejoin"],lt=s("path",{d:"M22.552 6.908a.5.5 0 0 1 .896 0l5.02 10.17a.5.5 0 0 0 .376.274l11.224 1.631a.5.5 0 0 1 .277.853l-8.122 7.916a.5.5 0 0 0-.143.443l1.917 11.178a.5.5 0 0 1-.726.527l-10.038-5.278a.5.5 0 0 0-.466 0L12.73 39.9a.5.5 0 0 1-.726-.527l1.918-11.178a.5.5 0 0 0-.144-.443l-8.122-7.916a.5.5 0 0 1 .278-.853l11.223-1.63a.5.5 0 0 0 .376-.274l5.02-10.17Z"},null,-1),ct=[lt];function it(e,c,o,p,v,y){return a(),n("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:w(e.cls),style:U(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:c[0]||(c[0]=(...r)=>e.onClick&&e.onClick(...r))},ct,14,nt)}var I=F(at,[["render",it]]);const rt=Object.assign(I,{install:(e,c)=>{var o;const p=(o=c==null?void 0:c.iconPrefix)!=null?o:"";e.component(p+I.name,I)}}),ut={class:"search_view"},dt={class:"container"},_t={class:"header"},pt={class:"head"},mt={class:"slogan"},gt={class:"action"},vt={class:"item"},ht=["onClick"],kt={class:"item"},yt=["onClick"],ft={class:"item"},bt=["onClick"],Ct={class:"source"},wt={class:"article_list"},$t={class:"item"},St={class:"top"},It=["src"],Lt={class:"bottom"},zt={class:"title"},Bt={class:"abstract"},Nt={class:"data"},xt={key:0},Ot={key:1},Vt={key:2},jt={key:3},Tt={class:"page"},Ht=O({__name:"search",setup(e){const c=q(),o=N({sort:"",tag:"",category:"",limit:8}),p=[{label:"综合排序",value:""},{label:"最多浏览",value:"look_count desc"},{label:"最新发布",value:"created_at desc"},{label:"最多点赞",value:"digg_count desc"},{label:"最多评论",value:"comment_count desc"},{label:"最多收藏",value:"collects_count desc"}],v=S([]),y=S([]);async function r(){let u=await R();v.value=[{label:"全部分类",value:""},...u.data]}r();function $(u,m){o[u]=m.value}async function V(){let u=await Y();y.value=[{label:"全部标签",value:""},...u.data]}V();const h=N({list:[],count:0});async function f(){console.log("我是getData");let u=await X(o);h.list=u.data.list,h.count=u.data.count}f();const L=S(!1);return G(()=>h.list,()=>{console.log("我是watch"),L.value=!0}),(u,m)=>{const j=g("a-input"),T=g("a-button"),A=g("router-link"),D=g("a-typography-paragraph"),M=g("a-pagination"),E=g("a-empty");return a(),n("div",ut,[l(Q,{"no-scroll":""}),s("main",null,[s("div",dt,[s("div",_t,[s("div",pt,[s("div",mt,i(d(c).siteInfo.slogan.length?d(c).siteInfo.slogan:"Jack Bloggggg | 搜索"),1),l(j,{class:"search_ipt",modelValue:o.key,"onUpdate:modelValue":m[0]||(m[0]=t=>o.key=t),onKeydown:H(f,["enter"]),placeholder:"搜索文章标题"},null,8,["modelValue"]),l(T,{type:"primary",onClick:f},{default:x(()=>[_("搜索")]),_:1})]),s("div",gt,[s("div",vt,[(a(),n(k,null,b(p,t=>s("span",{onClick:z=>$("sort",t),class:w({active:o.sort==t.value})},i(t.label),11,ht)),64))]),s("div",kt,[(a(!0),n(k,null,b(v.value,t=>(a(),n("span",{onClick:z=>$("category",t),class:w({active:o.category===t.value})},i(t.label),11,yt))),256))]),s("div",ft,[(a(!0),n(k,null,b(y.value,t=>(a(),n("span",{onClick:z=>$("tag",t),class:w({active:o.tag===t.value})},i(t.label),11,bt))),256))])]),s("div",Ct,[L.value?(a(),n(k,{key:0},[s("div",wt,[(a(!0),n(k,null,b(h.list,t=>(a(),n("div",$t,[s("div",St,[s("img",{src:t.banner_url,alt:""},null,8,It)]),s("div",Lt,[s("div",zt,[l(A,{to:{name:"article",params:{id:t.id}},innerHTML:t.title},null,8,["to","innerHTML"])]),s("div",Bt,[l(D,{ellipsis:{rows:2,showTooltip:!0,css:!0}},{default:x(()=>[_(i(t.abstract),1)]),_:2},1024)]),s("div",Nt,[o.sort==="look_count desc"||o.sort===""?(a(),n("span",xt,[l(d(J)),_(" "+i(t.look_count),1)])):C("",!0),o.sort==="digg_count desc"?(a(),n("span",Ot,[l(d(ot)),_(" "+i(t.digg_count),1)])):C("",!0),o.sort==="collects_count desc"?(a(),n("span",Vt,[l(d(rt)),_(" "+i(t.collects_count),1)])):C("",!0),o.sort==="comment_count desc"?(a(),n("span",jt,[l(d(st)),_(" "+i(t.comment_count),1)])):C("",!0),s("span",null,[l(d(Z)),_(" "+i(d(tt)(t.created_at)),1)])])])]))),256))]),s("div",Tt,[l(M,{total:h.count,"show-total":"",onChange:f,current:o.page,"onUpdate:current":m[1]||(m[1]=t=>o.page=t)},null,8,["total","current"])])],64)):(a(),W(E,{key:1,class:"empty"}))])])])]),l(et)])}}});export{Ht as default};

import{d as y,u as k,r as i,k as w,a as l,o as I,c as N,b as o,w as s,h as c,g as B,j as L,J as T,M as p,af as C}from"./index-BUgfj_ir.js";import{_ as E}from"./gvb_table.vue_vue_type_style_index_0_lang-C7TABh2O.js";import{a as O}from"./image_api-T9Id7gjq.js";import{I as S}from"./index-mwH3FZMb.js";import"./date-BwahDaeY.js";import"./index-LyQDbr6L.js";const U={class:"image_list_view"},V=["href","download"],z=y({__name:"image_list",setup(A){const u=k(),r=i([]),f=[{title:"id",dataIndex:"id"},{title:"名字",dataIndex:"name"},{title:"上传类型",dataIndex:"image_type",render:n=>{const e=n.record;let a="red";return e.image_type==="本地"&&(a="green"),T(C,{color:a},{default:()=>e.image_type})}},{title:"预览",slotName:"path"},{title:"上传时间",slotName:"created_at"},{title:"操作",slotName:"action"}];i(!1),w({nick_name:"",role:0,user_id:0});const d=i(!1),m=i();function _(){m.value.getList()}function g(n){const e=n.response;e.data.length>0&&e.data.forEach(a=>{if(!a.is_success){p.error(a.msg);return}p.success(a.msg)})}function v(){r.value=[]}return(n,e)=>{const a=l("a-upload"),h=l("a-modal"),b=l("a-image"),x=l("a-button");return I(),N("div",U,[o(h,{title:"图片上传",onBeforeOpen:v,visible:d.value,"onUpdate:visible":e[1]||(e[1]=t=>d.value=t),onOk:_},{default:s(()=>[o(a,{headers:{token:c(u).userInfo.token},"list-type":"picture-card",action:"/api/images",name:"images",class:"gvb_image_upload","file-list":r.value,"onUpdate:fileList":e[0]||(e[0]=t=>r.value=t),"image-preview":"",multiple:"",onSuccess:g},null,8,["headers","file-list"])]),_:1},8,["visible"]),o(E,{url:c(O),"delete-url":"/api/images",columns:f,"default-delete":"","add-label":"图片上传",ref_key:"gvbTable",ref:m,"search-placeholder":"搜索图片名称",onAdd:e[2]||(e[2]=t=>d.value=!0),"no-edit":"","no-confirm":""},{path:s(({record:t})=>[o(b,{src:t.path,style:{"border-radius":"5px"},height:"50px"},null,8,["src"])]),action_left:s(({record:t})=>[B("a",{style:{"margin-right":"10px"},href:t.path,download:t.name},[o(x,{type:"primary"},{icon:s(()=>[o(c(S))]),default:s(()=>[L("下载图片 ")]),_:1})],8,V)]),_:1},8,["url"])])}}});export{z as default};
